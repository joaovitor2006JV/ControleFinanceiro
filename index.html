<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jo√£ozinho Fin ‚Äî Controle Financeiro</title>

  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <!-- BACKGROUND -->
  <div class="bg"></div>
  <div class="overlay"></div>

  <!-- TOPO -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">üê∫</div>
      <div>
        <h1>Jo√£ozinho Fin</h1>
        <p>Controle simples de sal√°rio + extras + despesas</p>
      </div>
    </div>

    <div class="monthbar">
      <label for="mesRef">M√™s:</label>
      <input id="mesRef" type="month" />
      <button id="btnCarregar" class="btn">Carregar</button>
    </div>
  </header>

  <!-- CONTE√öDO -->
  <main class="container">

    <!-- ENTRADAS + RELAT√ìRIO -->
    <section class="grid">

      <!-- ENTRADAS -->
      <div class="card">
        <div class="card-title">
          <h2>Entradas</h2>
          <span class="chip">sal√°rio + extras</span>
        </div>

        <div class="form-row">
          <div class="field">
            <label>Data</label>
            <input id="entData" type="date" />
          </div>
          <div class="field">
            <label>Tipo</label>
            <select id="entTipo" class="select">
              <option value="salario">Sal√°rio</option>
              <option value="extra">Extra</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="field full">
            <label>Descri√ß√£o</label>
            <input id="entDesc" type="text" placeholder="ex: Sal√°rio do m√™s / 3 cortes" />
          </div>
        </div>

        <div class="form-row">
          <div class="field">
            <label>Valor (R$)</label>
            <input id="entValor" type="number" step="0.01" placeholder="ex: 1500,00" />
          </div>
          <div class="field">
            <label>&nbsp;</label>
            <button id="btnSalvarEntrada" class="btn primary">Salvar entrada</button>
          </div>
        </div>

        <div class="actions">
          <button id="btnCancelarEdicaoEntrada" class="btn ghost hidden">
            Cancelar edi√ß√£o
          </button>
        </div>

        <hr class="sep" />

        <h3 class="sub">Entradas do m√™s</h3>
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Data</th>
                <th>Tipo</th>
                <th>Descri√ß√£o</th>
                <th class="right">Valor</th>
                <th class="right">A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="listaEntradas"></tbody>
          </table>
        </div>
      </div>

      <!-- RELAT√ìRIO -->
      <div class="card">
        <div class="card-title">
          <h2>Relat√≥rio</h2>
          <span class="chip">resumo + categorias</span>
        </div>

        <div class="report-grid">
          <div class="kpi">
            <span>Total do m√™s (Entradas)</span>
            <strong id="repEntradas">R$ 0,00</strong>
          </div>
          <div class="kpi">
            <span>Total do m√™s (Despesas)</span>
            <strong id="repDespesas">R$ 0,00</strong>
          </div>
          <div class="kpi">
            <span>Saldo do m√™s</span>
            <strong id="repSaldo">R$ 0,00</strong>
          </div>
        </div>

        <div class="actions" style="margin-top:12px;">
          <button id="btnExportCSV" class="btn">Exportar CSV</button>
          <button id="btnPrint" class="btn ghost">Imprimir / Salvar PDF</button>
        </div>

        <hr class="sep" />

        <h3 class="sub">Gastos por categoria</h3>
        <div class="table-wrap">
          <table class="table">
            <thead>
              <tr>
                <th>Categoria</th>
                <th class="right">Total</th>
              </tr>
            </thead>
            <tbody id="repCats"></tbody>
          </table>
        </div>
      </div>

    </section>

    <!-- NOVA DESPESA -->
    <section class="grid">

      <div class="card">
        <div class="card-title">
          <h2>Nova despesa</h2>
          <span class="chip warn">gastos do dia</span>
        </div>

        <input id="despId" type="hidden" />

        <div class="form-row">
          <div class="field">
            <label>Data</label>
            <input id="data" type="date" />
          </div>
          <div class="field">
            <label>Categoria</label>
            <input id="categoria" type="text" placeholder="ex: Mercado" />
          </div>
        </div>

        <div class="form-row">
          <div class="field full">
            <label>Descri√ß√£o</label>
            <input id="descricao" type="text" placeholder="ex: arroz, p√£o, gasolina" />
          </div>
        </div>

        <div class="form-row">
          <div class="field">
            <label>Valor (R$)</label>
            <input id="valor" type="number" step="0.01" />
          </div>
          <div class="field">
            <label>&nbsp;</label>
            <button id="btnSalvarDespesa" class="btn primary">Salvar</button>
          </div>
        </div>

        <div class="actions">
          <button id="btnCancelarEdicao" class="btn ghost hidden">Cancelar edi√ß√£o</button>
        </div>
      </div>

    </section>

    <!-- DESPESAS -->
    <section class="card">
      <div class="card-title">
        <h2>Despesas</h2>
        <span class="chip">filtros simples</span>
      </div>

      <div class="filters">
        <div class="field">
          <label>De</label>
          <input id="fDe" type="date" />
        </div>
        <div class="field">
          <label>At√©</label>
          <input id="fAte" type="date" />
        </div>
        <div class="field">
          <label>Categoria</label>
          <input id="fCat" type="text" />
        </div>
        <div class="field">
          <label>Buscar</label>
          <input id="fBusca" type="text" />
        </div>
        <div class="field">
          <label>Min (R$)</label>
          <input id="fMin" type="number" step="0.01" />
        </div>
        <div class="field">
          <label>Max (R$)</label>
          <input id="fMax" type="number" step="0.01" />
        </div>

        <button id="btnAplicarFiltros" class="btn">Aplicar</button>
        <button id="btnLimparFiltros" class="btn ghost">Limpar</button>
      </div>

      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr>
              <th>Data</th>
              <th>Categoria</th>
              <th>Descri√ß√£o</th>
              <th class="right">Valor</th>
              <th class="right">A√ß√µes</th>
            </tr>
          </thead>
          <tbody id="lista"></tbody>
        </table>
      </div>
    </section>

  </main>

  <!-- TOAST -->
  <div id="toast" class="toast hidden"></div>

  <!-- SCRIPT -->
  <script src="app.js"></script>
</body>
</html>
